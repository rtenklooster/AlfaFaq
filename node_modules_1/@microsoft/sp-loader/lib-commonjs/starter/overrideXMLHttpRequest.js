"use strict";
/* tslint:disable:no-any */
/* tslint:disable:no-string-literal */
Object.defineProperty(exports, "__esModule", { value: true });
exports.overrideXMLHttpRequest = void 0;
/**
 * Force XMLHttpRequest to drop `traceparent` from the header by setting Microsoft_ApplicationInsights_BypassAjaxInstrumentation === true.
 * When `traceparent` property exists in the header, logs will get dropped in aria telementry.
 *
 * NOTE: take extra precaution when modifying this file.
 */
function overrideXMLHttpRequest() {
    (function (xmlHttpRequest) {
        function PatchedXmlHttpRequest() {
            var xhr = new xmlHttpRequest();
            xhr['Microsoft_ApplicationInsights_BypassAjaxInstrumentation'] = true;
            return xhr;
        }
        globalThis.XMLHttpRequest = new Proxy(xmlHttpRequest, {
            apply: function (_target, _thisArg, _args) { return PatchedXmlHttpRequest(); },
            construct: function (_target, _args) { return PatchedXmlHttpRequest(); }
        });
    })(globalThis.XMLHttpRequest);
}
exports.overrideXMLHttpRequest = overrideXMLHttpRequest;
/* tslint:enable:no-any */
/* tslint:enable:no-string-literal */
//# sourceMappingURL=overrideXMLHttpRequest.js.map