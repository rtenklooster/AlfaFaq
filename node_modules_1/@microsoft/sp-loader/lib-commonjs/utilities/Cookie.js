"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Cookie = /** @class */ (function () {
    function Cookie(cookie) {
        this._cookie = cookie || document.cookie;
    }
    Cookie.tryGetCookie = function (cookieId) {
        return new Cookie().tryGetCookie(cookieId);
    };
    Cookie.setCookie = function (id, value, attributes) {
        document.cookie = this.buildCookie(id, value, attributes);
    };
    Cookie.buildCookie = function (id, value, attributes) {
        var cookieData = [];
        // If the value includes disallowed character, encode the value
        if (value.indexOf(' ') !== -1 || value.indexOf(',') !== -1 || value.indexOf(';') !== -1) {
            value = encodeURIComponent(value);
        }
        cookieData.push("".concat(id, "=").concat(value));
        if (attributes) {
            if (attributes.path) {
                cookieData.push("path=".concat(attributes.path));
            }
            if (attributes.domain) {
                cookieData.push("domain=".concat(attributes.domain));
            }
            if (attributes.maxAge) {
                cookieData.push("max-age=".concat(attributes.maxAge));
            }
            if (attributes.expires) {
                cookieData.push("expires=".concat(attributes.expires.toUTCString()));
            }
            if (attributes.secure) {
                cookieData.push("secure");
            }
        }
        return cookieData.join('; ');
    };
    Cookie.prototype.tryGetCookie = function (cookieId) {
        var prefix = cookieId + '=';
        var keyValuePair = this._cookie
            .split(';') // Different cookies are separated by semi-colon
            .map(function (str) { return str.trim(); }) // Trimming in order to do prefix matching
            .filter(function (str) { return str.indexOf(prefix) === 0; })[0]; // All cookies are in the form ID=VALUE. Returns the first value
        // Returns the value if it exists, otherwise returns undefined
        return keyValuePair ? keyValuePair.substr(prefix.length) : undefined;
    };
    return Cookie;
}());
exports.default = Cookie;
//# sourceMappingURL=Cookie.js.map