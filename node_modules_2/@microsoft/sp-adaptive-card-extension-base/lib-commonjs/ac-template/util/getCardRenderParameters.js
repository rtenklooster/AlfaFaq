"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCardRenderParameters = void 0;
var tslib_1 = require("tslib");
var strings = tslib_1.__importStar(require("../../loc/Strings.resx"));
var actionButtonHelper_1 = require("./actionButtonHelper");
var Killswitches_1 = require("../../common/Killswitches");
function getCardRenderParameters(cardView, cardSize, deviceContext, template, defaultIconProperty, defaultTitle) {
    var cardButtons = cardView.cardButtons, data = cardView.data, onCardSelection = cardView.onCardSelection, _templateType = cardView._templateType;
    if (!template) {
        template = cardView.template;
    }
    var selectAction;
    if (cardButtons !== undefined && !(_templateType === 'Image' && cardSize !== 'Large')) {
        (0, actionButtonHelper_1.appendActions)(template, cardButtons, cardSize, deviceContext);
    }
    if (onCardSelection) {
        // The ACE WebPart checks for this id to determine whether a card action was from a button or the card
        var action = (0, actionButtonHelper_1.createAction)(deviceContext, onCardSelection, 'select-action');
        if (action.type === 'Action.OpenUrl' ||
            action.type === 'Action.Submit' ||
            action.type === 'VivaAction.GetLocation' ||
            action.type === 'VivaAction.ShowLocation' ||
            action.type === 'VivaAction.SelectMedia') {
            selectAction = action;
        }
    }
    if (!(0, Killswitches_1.isSetImageAltTextForImageCardviewKSActivated)() &&
        cardView._templateType === 'Image' &&
        data.imageAltText === undefined) {
        data.imageAltText = '';
    }
    return {
        data: tslib_1.__assign({ selectAction: selectAction, iconProperty: defaultIconProperty, iconAltText: data.iconAltText || strings.DefaultIconAltText, title: defaultTitle }, data),
        template: template,
        cardProperties: {
            iconProperty: data.iconProperty || defaultIconProperty,
            size: cardSize,
            title: data.title || defaultTitle,
            templateType: _templateType
        }
    };
}
exports.getCardRenderParameters = getCardRenderParameters;
//# sourceMappingURL=getCardRenderParameters.js.map